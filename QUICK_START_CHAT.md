# èŠå¤©ç•Œé¢å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### 1. æŸ¥çœ‹æ¼”ç¤ºé¡µé¢

æœ€å¿«çš„æ–¹å¼æ˜¯ç›´æ¥æ‰“å¼€æ¼”ç¤ºé¡µé¢ï¼š

```bash
open frontend/src/examples/chat-demo.html
```

è¿™ä¸ªé¡µé¢å±•ç¤ºäº†æ‰€æœ‰åŠŸèƒ½ï¼š
- âœ… æ‰“å­—æœºæ•ˆæœ
- âœ… æ€è€ƒè¿‡ç¨‹å±•ç¤º
- âœ… ä¼˜é›…çš„ UI è®¾è®¡
- âœ… åŠ¨ç”»æ•ˆæœ

### 2. åœ¨é¡¹ç›®ä¸­ä½¿ç”¨

#### æ­¥éª¤ 1: å¯¼å…¥ç»„ä»¶

```tsx
import AgentChatStream from '../components/AgentChatStream';
```

#### æ­¥éª¤ 2: ä½¿ç”¨ç»„ä»¶

```tsx
function MyPage() {
  return (
    <AgentChatStream
      agentId="your-agent-id"
      agentName="AI åŠ©æ‰‹"
      greeting="ä½ å¥½ï¼æˆ‘æ˜¯ AI åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ"
    />
  );
}
```

#### æ­¥éª¤ 3: å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
cd frontend
npm run dev
```

#### æ­¥éª¤ 4: è®¿é—®é¡µé¢

```
http://localhost:5173/agents/{agentId}/chat
```

## ğŸ¨ UI æ•ˆæœé¢„è§ˆ

### æ€è€ƒè¿‡ç¨‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’­ æ€è€ƒè¿‡ç¨‹                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ æ­£åœ¨åˆ†ææ‚¨çš„é—®é¢˜...                  â”‚
â”‚ æ£€ç´¢ç›¸å…³çŸ¥è¯†åº“...â–ˆ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å›å¤å†…å®¹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ ¹æ®æ‚¨çš„é—®é¢˜ï¼Œæˆ‘çš„ç†è§£æ˜¯...â–ˆ         â”‚
â”‚                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ğŸ“¦ gpt-4  |  ğŸ”¢ 150 tokens          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä½¿ç”¨ Hook

å¦‚æœéœ€è¦æ›´å¤šæ§åˆ¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ hookï¼š

```tsx
import { useAgentChatStream } from '../hooks/useAgentChatStream';

function MyCustomChat() {
  const {
    messages,
    currentResponse,
    currentReasoning,
    isStreaming,
    sendMessage,
    cancelStream,
  } = useAgentChatStream({
    agentId: 'your-agent-id',
    onChunk: (chunk) => {
      console.log('æ”¶åˆ°æ•°æ®:', chunk);
    },
    onComplete: (message) => {
      console.log('å®Œæˆ:', message);
    },
    onError: (error) => {
      console.error('é”™è¯¯:', error);
    },
  });

  return (
    <div>
      {/* è‡ªå®šä¹‰ UI */}
      {currentReasoning && (
        <div className="thinking">
          æ€è€ƒä¸­: {currentReasoning}
        </div>
      )}
      
      {currentResponse && (
        <div className="response">
          {currentResponse}
        </div>
      )}
      
      <button onClick={() => sendMessage('ä½ å¥½')}>
        å‘é€æ¶ˆæ¯
      </button>
    </div>
  );
}
```

## ğŸ“Š æ•°æ®æ ¼å¼

### å‘é€æ¶ˆæ¯

```typescript
await sendMessage('ä½ å¥½ï¼Œè¯·å¸®æˆ‘åˆ†æä¸€ä¸‹...');
```

### æ¥æ”¶æ•°æ®

```typescript
// æ€è€ƒè¿‡ç¨‹
{
  type: 'content',
  reasoning_content: 'æ­£åœ¨åˆ†æé—®é¢˜...',
  session_id: 'xxx',
  message_id: 'xxx'
}

// å›å¤å†…å®¹
{
  type: 'content',
  content: 'æ ¹æ®åˆ†æ...',
  session_id: 'xxx',
  message_id: 'xxx'
}

// å®Œæˆ
{
  type: 'done',
  reply_id: 'xxx',
  metadata: {
    model: 'gpt-4',
    tokens_used: 150
  }
}
```

## ğŸ¯ å…³é”®ç‰¹æ€§

### 1. å®æ—¶æ‰“å­—æœºæ•ˆæœ
- å†…å®¹é€å­—æ˜¾ç¤º
- é—ªçƒçš„å…‰æ ‡
- æµç•…çš„åŠ¨ç”»

### 2. æ€è€ƒè¿‡ç¨‹å±•ç¤º
- ç‹¬ç«‹çš„ç¥ç€è‰²å¡ç‰‡
- æ—‹è½¬çš„æ€è€ƒå›¾æ ‡
- å®æ—¶æ›´æ–°

### 3. ä¼˜é›…çš„ UI
- æ¸å˜è‰²èƒŒæ™¯
- Emoji å›¾æ ‡
- å“åº”å¼è®¾è®¡

## ğŸ” æµ‹è¯•

### è¿è¡Œæµ‹è¯•è„šæœ¬

```bash
./test_chat_typewriter.sh
```

### æ£€æŸ¥åŠŸèƒ½

- [ ] æ€è€ƒè¿‡ç¨‹æ˜¯å¦æ˜¾ç¤º
- [ ] æ‰“å­—æœºæ•ˆæœæ˜¯å¦æµç•…
- [ ] æ ·å¼æ˜¯å¦æ­£ç¡®
- [ ] åŠ¨ç”»æ˜¯å¦æ­£å¸¸
- [ ] è‡ªåŠ¨æ»šåŠ¨æ˜¯å¦å·¥ä½œ

## ğŸ“š æ›´å¤šæ–‡æ¡£

- [åŠŸèƒ½è¯¦ç»†è¯´æ˜](./CHAT_TYPEWRITER_FEATURE.md)
- [UI è®¾è®¡é¢„è§ˆ](./CHAT_UI_PREVIEW.md)
- [æ”¹è¿›æ€»ç»“](./CHAT_IMPROVEMENTS_SUMMARY.md)

## ğŸ’¡ æç¤º

1. **æ¼”ç¤ºé¡µé¢**æ˜¯æœ€å¿«äº†è§£åŠŸèƒ½çš„æ–¹å¼
2. **AgentChatStream** ç»„ä»¶å¼€ç®±å³ç”¨
3. **useAgentChatStream** hook æä¾›æ›´å¤šæ§åˆ¶
4. æ‰€æœ‰æ ·å¼éƒ½ä½¿ç”¨ Tailwind CSS
5. æ”¯æŒå“åº”å¼è®¾è®¡

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: æ€è€ƒè¿‡ç¨‹ä¸æ˜¾ç¤ºï¼Ÿ
A: ç¡®ä¿åç«¯è¿”å› `reasoning_content` å­—æ®µ

### Q: æ‰“å­—æœºæ•ˆæœä¸æµç•…ï¼Ÿ
A: æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œ SSE æµæ˜¯å¦æ­£å¸¸

### Q: æ ·å¼ä¸æ­£ç¡®ï¼Ÿ
A: ç¡®ä¿ Tailwind CSS å·²æ­£ç¡®é…ç½®

### Q: å¦‚ä½•è‡ªå®šä¹‰æ ·å¼ï¼Ÿ
A: ä¿®æ”¹ç»„ä»¶ä¸­çš„ className æˆ–æ·»åŠ è‡ªå®šä¹‰ CSS

## âœ¨ å¼€å§‹ä½¿ç”¨

```bash
# 1. æ‰“å¼€æ¼”ç¤ºé¡µé¢
open frontend/src/examples/chat-demo.html

# 2. æˆ–å¯åŠ¨å¼€å‘æœåŠ¡å™¨
cd frontend && npm run dev

# 3. è®¿é—®èŠå¤©é¡µé¢
# http://localhost:5173/agents/{agentId}/chat
```

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
