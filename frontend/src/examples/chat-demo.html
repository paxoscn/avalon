<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŠå¤©ç•Œé¢æ¼”ç¤º - æ‰“å­—æœºæ•ˆæœå’Œæ€è€ƒè¿‡ç¨‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fade-in 0.3s ease-out;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .animate-spin {
            animation: spin 1s linear infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="max-w-4xl mx-auto h-screen flex flex-col">
        <!-- Header -->
        <div class="bg-white border-b px-6 py-4">
            <h1 class="text-2xl font-bold text-gray-800">èŠå¤©ç•Œé¢æ¼”ç¤º</h1>
            <p class="text-sm text-gray-600 mt-1">å±•ç¤ºæ‰“å­—æœºæ•ˆæœå’Œæ€è€ƒè¿‡ç¨‹</p>
        </div>

        <!-- Messages -->
        <div id="messages" class="flex-1 overflow-y-auto px-6 py-4 space-y-4">
            <!-- æ¬¢è¿æ¶ˆæ¯ -->
            <div class="flex items-start space-x-3 animate-fade-in">
                <div class="flex-shrink-0 w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white shadow-md">
                    ğŸ¤–
                </div>
                <div class="flex-1 bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg shadow-sm p-4">
                    <p class="text-gray-800 leading-relaxed">ä½ å¥½ï¼æˆ‘æ˜¯ AI åŠ©æ‰‹ã€‚æˆ‘å¯ä»¥å±•ç¤ºæ€è€ƒè¿‡ç¨‹å’Œæ‰“å­—æœºæ•ˆæœã€‚è¯•è¯•é—®æˆ‘ä¸€ä¸ªé—®é¢˜å§ï¼</p>
                </div>
            </div>
        </div>

        <!-- Input -->
        <div class="bg-white border-t px-6 py-4">
            <div class="flex items-end space-x-3">
                <textarea
                    id="input"
                    placeholder="è¾“å…¥ä½ çš„æ¶ˆæ¯..."
                    rows="1"
                    class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                    style="min-height: 48px; max-height: 120px;"
                ></textarea>
                <button
                    id="sendBtn"
                    class="px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium"
                >
                    å‘é€
                </button>
            </div>
        </div>
    </div>

    <script>
        const messagesDiv = document.getElementById('messages');
        const input = document.getElementById('input');
        const sendBtn = document.getElementById('sendBtn');

        // æ¨¡æ‹Ÿæ€è€ƒè¿‡ç¨‹å’Œå›å¤
        const simulateResponse = async (userMessage) => {
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            addUserMessage(userMessage);

            // æ¨¡æ‹Ÿå»¶è¿Ÿ
            await sleep(500);

            // å¼€å§‹æµå¼å“åº”
            const thinkingSteps = [
                'æ­£åœ¨åˆ†ææ‚¨çš„é—®é¢˜...',
                'æ£€ç´¢ç›¸å…³çŸ¥è¯†åº“...',
                'æ•´ç†å›ç­”æ€è·¯...',
                'å‡†å¤‡ç”Ÿæˆå›å¤...'
            ];

            const response = `æ ¹æ®æ‚¨çš„é—®é¢˜"${userMessage}"ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼šè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ã€‚è®©æˆ‘è¯¦ç»†ä¸ºæ‚¨è§£ç­”ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å‡ ä¸ªå…³é”®å› ç´ ã€‚å…¶æ¬¡ï¼Œä»å®è·µè§’åº¦æ¥çœ‹ï¼Œè¿™ä¸ªæ–¹æ¡ˆæ˜¯å¯è¡Œçš„ã€‚æœ€åï¼Œæˆ‘å»ºè®®æ‚¨å¯ä»¥å°è¯•è¿™æ ·åšã€‚`;

            await streamAssistantMessage(thinkingSteps, response);
        };

        // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
        function addUserMessage(content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start space-x-3 flex-row-reverse space-x-reverse animate-fade-in';
            messageDiv.innerHTML = `
                <div class="flex-shrink-0 w-8 h-8 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white shadow-md">
                    ğŸ‘¤
                </div>
                <div class="flex-1 bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-lg shadow-sm p-4">
                    <p class="text-gray-800 leading-relaxed">${content}</p>
                </div>
            `;
            messagesDiv.appendChild(messageDiv);
            scrollToBottom();
        }

        // æµå¼æ˜¾ç¤ºåŠ©æ‰‹æ¶ˆæ¯
        async function streamAssistantMessage(thinkingSteps, response) {
            const containerDiv = document.createElement('div');
            containerDiv.className = 'flex items-start space-x-3 animate-fade-in';
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = 'flex-shrink-0 w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white shadow-md';
            avatarDiv.textContent = 'ğŸ¤–';
            
            const contentWrapperDiv = document.createElement('div');
            contentWrapperDiv.className = 'flex-1';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'space-y-3';
            
            contentWrapperDiv.appendChild(contentDiv);
            containerDiv.appendChild(avatarDiv);
            containerDiv.appendChild(contentWrapperDiv);
            messagesDiv.appendChild(containerDiv);

            // æ€è€ƒè¿‡ç¨‹
            const thinkingDiv = document.createElement('div');
            thinkingDiv.className = 'bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-lg p-4 shadow-sm';
            thinkingDiv.innerHTML = `
                <div class="flex items-center space-x-2 mb-2">
                    <svg class="w-5 h-5 text-amber-600 animate-spin" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span class="text-sm font-semibold text-amber-700">ğŸ’­ æ€è€ƒè¿‡ç¨‹</span>
                </div>
                <div class="text-sm text-amber-900 leading-relaxed">
                    <span id="thinking-content"></span>
                    <span class="inline-block w-1 h-4 bg-amber-600 animate-pulse ml-1 align-middle"></span>
                </div>
            `;
            contentDiv.appendChild(thinkingDiv);
            scrollToBottom();

            const thinkingContent = document.getElementById('thinking-content');

            // é€æ­¥æ˜¾ç¤ºæ€è€ƒè¿‡ç¨‹
            for (const step of thinkingSteps) {
                await typeText(thinkingContent, step + '\n', 30);
                await sleep(300);
            }

            // ç§»é™¤æ€è€ƒè¿‡ç¨‹çš„å…‰æ ‡
            thinkingDiv.querySelector('.animate-pulse').remove();

            // æ·»åŠ å›å¤å†…å®¹
            const responseDiv = document.createElement('div');
            responseDiv.className = 'bg-white rounded-lg shadow-sm p-4 border border-gray-100';
            responseDiv.innerHTML = `
                <div class="text-gray-800 leading-relaxed">
                    <span id="response-content"></span>
                    <span class="inline-block w-1 h-4 bg-blue-500 animate-pulse ml-1 align-middle"></span>
                </div>
            `;
            contentDiv.appendChild(responseDiv);
            scrollToBottom();

            const responseContent = document.getElementById('response-content');

            // æ‰“å­—æœºæ•ˆæœæ˜¾ç¤ºå›å¤
            await typeText(responseContent, response, 20);

            // ç§»é™¤å›å¤çš„å…‰æ ‡
            responseDiv.querySelector('.animate-pulse').remove();

            // ä¿å­˜å®Œæ•´çš„æ€è€ƒè¿‡ç¨‹
            const fullReasoning = thinkingSteps.join('\n');

            // æ·»åŠ æ€è€ƒè¿‡ç¨‹æŒ‰é’®
            const reasoningButtonDiv = document.createElement('div');
            reasoningButtonDiv.className = 'mt-3';
            reasoningButtonDiv.innerHTML = `
                <button class="reasoning-toggle flex items-center space-x-2 text-sm text-amber-700 hover:text-amber-800 font-medium transition-colors">
                    <svg class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                    <span>ğŸ’­ æ€è€ƒè¿‡ç¨‹</span>
                </button>
                <div class="reasoning-content hidden mt-2 p-3 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-lg">
                    <p class="text-sm text-amber-900 whitespace-pre-wrap leading-relaxed">${fullReasoning}</p>
                </div>
            `;
            
            // æ·»åŠ ç‚¹å‡»äº‹ä»¶
            const toggleButton = reasoningButtonDiv.querySelector('.reasoning-toggle');
            const reasoningContent = reasoningButtonDiv.querySelector('.reasoning-content');
            const arrow = toggleButton.querySelector('svg');
            
            toggleButton.addEventListener('click', () => {
                reasoningContent.classList.toggle('hidden');
                arrow.classList.toggle('rotate-90');
            });
            
            responseDiv.querySelector('.text-gray-800').appendChild(reasoningButtonDiv);

            // æ·»åŠ å…ƒæ•°æ®
            const metadataDiv = document.createElement('div');
            metadataDiv.className = 'mt-3 pt-3 border-t border-gray-200 flex items-center space-x-4 text-xs text-gray-500';
            metadataDiv.innerHTML = `
                <span class="flex items-center space-x-1">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" />
                    </svg>
                    <span>o1-preview</span>
                </span>
                <span class="flex items-center space-x-1">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14" />
                    </svg>
                    <span>${Math.floor(response.length / 4)} tokens</span>
                </span>
            `;
            responseDiv.querySelector('.text-gray-800').appendChild(metadataDiv);
        }

        // æ‰“å­—æœºæ•ˆæœ
        async function typeText(element, text, speed) {
            for (let i = 0; i < text.length; i++) {
                element.textContent += text[i];
                scrollToBottom();
                await sleep(speed);
            }
        }

        // å»¶è¿Ÿå‡½æ•°
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // æ»šåŠ¨åˆ°åº•éƒ¨
        function scrollToBottom() {
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        // å‘é€æ¶ˆæ¯
        sendBtn.addEventListener('click', async () => {
            const message = input.value.trim();
            if (!message) return;

            input.value = '';
            sendBtn.disabled = true;
            sendBtn.textContent = 'å‘é€ä¸­...';

            await simulateResponse(message);

            sendBtn.disabled = false;
            sendBtn.textContent = 'å‘é€';
        });

        // å›è½¦å‘é€
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendBtn.click();
            }
        });

        // è‡ªåŠ¨è°ƒæ•´è¾“å…¥æ¡†é«˜åº¦
        input.addEventListener('input', () => {
            input.style.height = 'auto';
            input.style.height = Math.min(input.scrollHeight, 120) + 'px';
        });
    </script>
</body>
</html>
